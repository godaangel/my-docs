<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue Render介绍和一些基本的实例 | 个人主页</title>
    <meta name="description" content="Godaangel的个人主页">
    <link rel="icon" href="/img/logo.ico">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/img/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.9c3f924d.css" as="style"><link rel="preload" href="/assets/js/app.e797f4dd.js" as="script"><link rel="preload" href="/assets/js/2.f20e9021.js" as="script"><link rel="preload" href="/assets/js/7.dddc0873.js" as="script"><link rel="prefetch" href="/assets/js/3.c3daaf60.js"><link rel="prefetch" href="/assets/js/4.0e4bf2cd.js"><link rel="prefetch" href="/assets/js/5.3018ea67.js"><link rel="prefetch" href="/assets/js/6.8a30bd4d.js"><link rel="prefetch" href="/assets/js/8.0dd37c5e.js"><link rel="prefetch" href="/assets/js/9.6613c730.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9c3f924d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">NodeJS</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://www.github.com/godaangel" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">NodeJS</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://www.github.com/godaangel" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/vue-render.html" class="active sidebar-link">Vue Render介绍和一些基本的实例</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-render介绍和一些基本的实例"><a href="#vue-render介绍和一些基本的实例" class="header-anchor">#</a> Vue Render介绍和一些基本的实例</h1> <blockquote><p>为啥研究这个？在之前开发组件库的过程中，遇到了许多遗留的问题，包括数据模板渲染、组件按需加载、引入自定义组件插槽等等，所以为了修复和避免这些问题，学习一波更接近编译器的编写方式，看看如何通过这种完全编程方式来解决一波这些问题~当然这里只是一些最基本的使用和探索，因为官网例子太少了，只能一个个自己搭=。=</p></blockquote> <p><em>Vue 推荐在绝大多数情况下使用 template 来创建你的 HTML。然而在一些场景中，你真的需要 JavaScript 的完全编程的能力，这就是<strong>render 函数</strong>，它比 template 更接近编译器。</em>（<strong>从官网复制的，慌得一批，其实简单来说就是以函数的方式写HTML，可控性更强一些~</strong>）</p> <p>当然，官网已经给出了一个使用template来编写的不方便的demo，所以在这里就不反复提起了，初次使用或者有兴趣的大佬可以直接戳这个链接了解一下~<a href="https://cn.vuejs.org/v2/guide/render-function.html#%E5%9F%BA%E7%A1%80" title="Vue Render" target="_blank" rel="noopener noreferrer">Vue Render<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="本篇文章主要介绍了以下几点"><a href="#本篇文章主要介绍了以下几点" class="header-anchor">#</a> 本篇文章主要介绍了以下几点</h3> <blockquote><p>了解基本概念的客官可以直接下拉到实例，实例已上传github</p></blockquote> <ul><li>虚拟DOM</li> <li>CreateElement函数</li> <li>【起步】最基本的实例</li> <li>【进阶】包含属性配置较完整的实例</li> <li>【进阶】CreateElement中<code>slot</code>属性的用法</li> <li>【深入】CreateElement中<code>scopedSlots</code>的用法</li> <li>【换口气儿】Render中的JSX配置和用法</li> <li>【深入】函数式组件</li></ul> <h3 id="github传送门"><a href="#github传送门" class="header-anchor">#</a> <a href="https://github.com/godaangel/vue-render-test.git" target="_blank" rel="noopener noreferrer">Github传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h3> <h5 id="_1、什么是dom？"><a href="#_1、什么是dom？" class="header-anchor">#</a> 1、<strong>什么是DOM？</strong></h5> <p>DOM 就是浏览器解析 HTML 得来的一个树形逻辑对象。</p> <h5 id="_2、什么是虚拟dom？"><a href="#_2、什么是虚拟dom？" class="header-anchor">#</a> 2、<strong>什么是虚拟DOM？</strong></h5> <p>用 Object 来代表一个节点，这个节点叫做虚拟节点（ Virtual Node ）简写为 VNode，由 VNode 树组成虚拟DOM。</p> <h5 id="_3、为什么要用虚拟dom？"><a href="#_3、为什么要用虚拟dom？" class="header-anchor">#</a> 3、<strong>为什么要用虚拟DOM？</strong></h5> <p>Web 页面的大多数操作和逻辑的本质就是不停地修改 DOM 元素，但是 DOM 操作太慢了，过于频繁的 DOM 操作可能会导致整个页面掉帧、卡顿甚至失去响应。仔细想一想，很多 DOM 操作是可以打包（多个操作压成一个）和合并（一个连续更新操作只保留最终结果）的，同时 JS 引擎的计算速度要快得多，所以为什么不把 DOM 操作先通过JS计算完成后统一来一次大招操作DOM呢，于是就有了虚拟DOM的概念。当然，虚拟DOM操作的核心是Diff算法，也就是比较变化前后Vnode的不同，计算出最小的DOM操作来改变DOM，提高性能。</p> <h5 id="_4、vue里面的虚拟dom怎么生成的呢？"><a href="#_4、vue里面的虚拟dom怎么生成的呢？" class="header-anchor">#</a> 4、<strong>Vue里面的虚拟DOM怎么生成的呢？</strong></h5> <p>通过`createElement(tag, options, VNodes)`，下面就来介绍这个函数的基本概念。</p> <h3 id="createelement-函数"><a href="#createelement-函数" class="header-anchor">#</a> CreateElement 函数</h3> <blockquote><p>简单来说CreateElement就是用来生成Vnode的函数</p></blockquote> <p>CreateElement 到底会返回什么呢？其实不是一个实际的 DOM 元素（返回的是Vnode）。它更准确的名字可能是 createNodeDescription，因为它所包含的信息会告诉 Vue 页面上需要渲染什么样的节点，及其子节点。</p> <p><strong>【Tips】</strong><code>CreateElement</code><strong>函数在惯例中通常也写作</strong><code>h</code></p> <h5 id="_1、createelement的参数如下所示：（太懒了直接搬的官网）"><a href="#_1、createelement的参数如下所示：（太懒了直接搬的官网）" class="header-anchor">#</a> 1、<strong>CreateElement的参数如下所示</strong>：（<s>太懒了直接搬的官网</s>）</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// @returns {VNode}</span>
<span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token comment">// {String | Object | Function}</span>
  <span class="token comment">// 一个 HTML 标签字符串，组件选项对象，或者 解析上述任何一种的一个 async 异步函数，必要参数。</span>
  <span class="token string">'div'</span><span class="token punctuation">,</span>

  <span class="token comment">// {Object}</span>
  <span class="token comment">// 一个包含模板相关属性的数据对象</span>
  <span class="token comment">// 这样，您可以在 template 中使用这些属性。可选参数。</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 详情见下方</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// {String | Array}</span>
  <span class="token comment">// 子节点 (VNodes)，由 `createElement()` 构建而成，或使用字符串来生成“文本节点”。可选参数。</span>
  <span class="token punctuation">[</span>
    <span class="token string">'先写一些文字'</span><span class="token punctuation">,</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token string">'一则头条'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        someProp<span class="token punctuation">:</span> <span class="token string">'foobar'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre></div><p>【**Tips】: **文档中此处说VNodes子节点必须是唯一的，也就是说第三个参数的Array里不能出现相同指向的VNodes，实际验证以后，就算写重复的VNodes，也并不会报错，估计此处会有些坑，现在还没踩到，建议按照文档要求，保持子节点唯一。</p> <h5 id="_2、vnode属性配置（第二个参数）：-太懒了也是直接搬，捂脸-jpg"><a href="#_2、vnode属性配置（第二个参数）：-太懒了也是直接搬，捂脸-jpg" class="header-anchor">#</a> 2、Vnode属性配置（第二个参数）：(<s>太懒了也是直接搬，捂脸.jpg</s>)</h5> <p>以下属性为简单介绍，具体用法和一些 _备注解释 _可以参考后面会讲到的【包含属性配置较完整的实例】</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// 和`v-bind:class`一样的 API</span>
  <span class="token comment">// 接收一个字符串、对象或字符串和对象组成的数组</span>
  <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    bar<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 和`v-bind:style`一样的 API</span>
  <span class="token comment">// 接收一个字符串、对象或对象组成的数组</span>
  style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    fontSize<span class="token punctuation">:</span> <span class="token string">'14px'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 正常的 HTML 特性</span>
  attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token string">'foo'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 组件 props</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    myProp<span class="token punctuation">:</span> <span class="token string">'bar'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// DOM 属性</span>
  domProps<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    innerHTML<span class="token punctuation">:</span> <span class="token string">'baz'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 事件监听器基于 `on`</span>
  <span class="token comment">// 所以不再支持如 `v-on:keyup.enter` 修饰器</span>
  <span class="token comment">// 需要手动匹配 keyCode。</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 仅对于组件，用于监听原生事件，而不是组件内部使用</span>
  <span class="token comment">// `vm.$emit` 触发的事件。</span>
  nativeOn<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nativeClickHandler
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 自定义指令。注意，你无法对 `binding` 中的 `oldValue`</span>
  <span class="token comment">// 赋值，因为 Vue 已经自动为你进行了同步。</span>
  directives<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'my-custom-directive'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      expression<span class="token punctuation">:</span> <span class="token string">'1 + 1'</span><span class="token punctuation">,</span>
      arg<span class="token punctuation">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
      modifiers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        bar<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 作用域插槽格式</span>
  <span class="token comment">// { name: props =&gt; VNode | Array&lt;VNode&gt; }</span>
  scopedSlots<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">default</span><span class="token punctuation">:</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 如果组件是其他组件的子组件，需为插槽指定名称</span>
  slot<span class="token punctuation">:</span> <span class="token string">'name-of-slot'</span><span class="token punctuation">,</span>
  <span class="token comment">// 其他特殊顶层属性</span>
  key<span class="token punctuation">:</span> <span class="token string">'myKey'</span><span class="token punctuation">,</span>
  ref<span class="token punctuation">:</span> <span class="token string">'myRef'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="【起步】最基本的实例"><a href="#【起步】最基本的实例" class="header-anchor">#</a> 【起步】最基本的实例</h3> <p>这是一个基础的Demo，包含了</p> <ul><li><p>简单的渲染用法</p></li> <li><p>标签</p></li> <li><p>props</p></li> <li><p>slot</p></li> <li><p>点击事件</p></li></ul> <p>以下示例Demo均采用单文件组件的方式，工程用<code>vue-cli</code>搭建的<code>webpack-simple</code>工程。</p> <p><strong>组件</strong><code>wii-first</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-first'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    level<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token punctuation">[</span>Number<span class="token punctuation">,</span> String<span class="token punctuation">]</span><span class="token punctuation">,</span>
      required<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>subtitle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>subtitle <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// this.level = 1时, 等价于</span>
      <span class="token comment">// &lt;h1 class=&quot;wii-first&quot;&gt;</span>
      <span class="token comment">//  第一个组件, &lt;slot&gt;&lt;/slot&gt;</span>
      <span class="token comment">//  &lt;slot name=&quot;subtitle&quot;&gt;&lt;/slot&gt;，此处是data的值: {{msg}}</span>
      <span class="token comment">//  &lt;button @click=&quot;clickHandler&quot;&gt;点我改变内部data值&lt;/button&gt;</span>
      <span class="token comment">// &lt;/h1&gt;</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'h'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>level<span class="token punctuation">,</span> <span class="token comment">// tag name 标签名称</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'wii-first'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// this.$slots.default, // 子组件中的slot 单个传递</span>
      <span class="token comment">// this.$slots.subtitle,</span>
      <span class="token punctuation">[</span>
        <span class="token string">'第一个组件, '</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default<span class="token punctuation">,</span> <span class="token comment">// 默认slots传递</span>
        <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>subtitle<span class="token punctuation">,</span> <span class="token comment">// 具名slots传递</span>
        <span class="token string">'，此处是data的值: '</span><span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
        <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'点我改变内部data值'</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>【Tips】：CreateElement的第三个参数在文档中规定组件树中的所有 VNode 必须是唯一的，也就是说在第三个参数中有两个指向相同的Vnode是无效的。但经过实践发现，实际上是可以渲染出来的，在此不推荐这么写哦，可能会掉到不可预料的大坑hiahiahia~</p> <p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>first level<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>我是标题 <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">&quot;subtitle&quot;</span><span class="token operator">&gt;</span>我是subtitle<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>first<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiFirst <span class="token keyword">from</span> <span class="token string">'./components/first/index.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiFirst
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="【进阶】包含属性配置较完整的实例"><a href="#【进阶】包含属性配置较完整的实例" class="header-anchor">#</a> 【进阶】包含属性配置较完整的实例</h3> <p>这个Demo主要展示了createElement属性用法，包含</p> <ul><li>class，style，attrs，on等</li> <li>包含了点击事件以及<code>click.stop</code>的转换示例</li></ul> <p>不包含</p> <ul><li>v-for v-if v-model的实现，这些在官网都有很详细的说明了 <a href="https://cn.vuejs.org/v2/guide/render-function.html#v-if-%E5%92%8C-v-for" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><strong>组件</strong><code>wii-second</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-second'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      myProp<span class="token punctuation">:</span> <span class="token string">'我是data的值, 只是为了证明props不是走这儿'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 等价于</span>
    <span class="token comment">// &lt;div id=&quot;second&quot; class=&quot;wii-second blue-color&quot; style=&quot;color: green;&quot; @click=&quot;clickHandler&quot;&gt;</span>
    <span class="token comment">//     我是第二个组件测试, 点我触发组件内部click和外部定义的@click.native事件。</span>
    <span class="token comment">//     &lt;div&gt;{{myProp}}&lt;/div&gt;</span>
    <span class="token comment">//     &lt;button @click=&quot;buttonClick&quot;&gt;触发emit&lt;/button&gt;</span>
    <span class="token comment">// &lt;/div&gt;</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">//【class】和`v-bind:class`一样的 API</span>
        <span class="token comment">// 接收一个字符串、对象或字符串和对象组成的数组</span>
        <span class="token comment">// class: 'wii-second',</span>
        <span class="token comment">// class: {</span>
        <span class="token comment">//     'wii-second': true,</span>
        <span class="token comment">//     'grey-color': true</span>
        <span class="token comment">// },</span>
        <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token string">'wii-second'</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'blue-color'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token comment">//【style】和`v-bind:style`一样的 API</span>
        <span class="token comment">// 接收一个字符串、对象或对象组成的数组</span>
        style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          color<span class="token punctuation">:</span> <span class="token string">'green'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//【attrs】正常的 HTML 特性, id、title、align等，不支持class，原因是上面的class优先级最高[仅猜测]</span>
        <span class="token comment">// 等同于DOM的 Attribute</span>
        attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          id<span class="token punctuation">:</span> <span class="token string">'second'</span><span class="token punctuation">,</span>
          title<span class="token punctuation">:</span> <span class="token string">'测试'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 【props】组件 props，如果createElement定义的第一个参数是组件，则生效，此处定义的数据将被传到组件内部</span>
        props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          myProp<span class="token punctuation">:</span> <span class="token string">'bar'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// DOM 属性 如 value, innerHTML, innerText等, 是这个DOM元素作为对象, 其附加的内容</span>
        <span class="token comment">// 等同于DOM的 Property</span>
        <span class="token comment">// domProps: {</span>
        <span class="token comment">//   innerHTML: 'baz'</span>
        <span class="token comment">// },</span>
        <span class="token comment">// 事件监听器基于 `on`, 用于组件内部的事件监听</span>
        on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 仅对于组件，同props，等同@click.native，用于监听组件内部原生事件，而不是组件内部使用 `vm.$emit` 触发的事件。</span>
        <span class="token comment">// nativeOn: {</span>
        <span class="token comment">//   click: this.nativeClickHandler</span>
        <span class="token comment">// },</span>
        <span class="token comment">// 如果组件是其他组件的子组件，需为插槽指定名称，见 wii-third 组件</span>
        <span class="token comment">// slot: 'testslot',</span>
        <span class="token comment">// 其他特殊顶层属性</span>
        <span class="token comment">// key: 'myKey',</span>
        <span class="token comment">// ref: 'myRef'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是第二个组件测试, 点我触发组件内部click和外部定义的@click.native事件。</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>myProp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>buttonClick
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'触发emit'</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我点击了第二个组件，这是组件内部触发的事件'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">buttonClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止事件冒泡 等价于 click.stop</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我点击了第二个组件的button，将会通过emit触发外部的自定义事件'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'on-click-button'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>second @click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">&quot;nativeClick&quot;</span> @on<span class="token operator">-</span>click<span class="token operator">-</span>button<span class="token operator">=</span><span class="token string">&quot;clickButton&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>second<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiSecond <span class="token keyword">from</span> <span class="token string">'./components/second/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiSecond
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">nativeClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是组件外部click.native触发的事件，第二个组件被点击了'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">clickButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是组件外部触发的【emit】事件，第二个组件被点击了'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="事件-按键修饰符"><a href="#事件-按键修饰符" class="header-anchor">#</a> 事件 &amp; 按键修饰符</h4> <p>上面例子中用到了<code>e.stopPropagation</code>这个方法，等价于 template 模板写法的<code>click.stop</code>，其他的事件和按键修饰符也有对应的方法，对应情况如下。</p> <p><strong>事件修饰符对应的前缀</strong></p> <table><thead><tr><th style="text-align:left;">template事件修饰符</th> <th style="text-align:left;">render写法前缀</th></tr></thead> <tbody><tr><td style="text-align:left;">.passive</td> <td style="text-align:left;">&amp;</td></tr> <tr><td style="text-align:left;">.capture</td> <td style="text-align:left;">!</td></tr> <tr><td style="text-align:left;">.once</td> <td style="text-align:left;">~</td></tr> <tr><td style="text-align:left;">.capture.once 或 .once.capture</td> <td style="text-align:left;">~!</td></tr></tbody></table> <p>例如</p> <div class="language-js extra-class"><pre class="language-js"><code>on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">'!click'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doThisInCapturingMode<span class="token punctuation">,</span>
  <span class="token string">'~keyup'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doThisOnce<span class="token punctuation">,</span>
  <span class="token string">'~!mouseover'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doThisOnceInCapturingMode
<span class="token punctuation">}</span>
</code></pre></div><p><strong>其他事件修饰符，对应的事件处理函数中使用事件方法</strong></p> <table><thead><tr><th style="text-align:left;">template事件修饰符</th> <th style="text-align:left;">对应的事件方法</th></tr></thead> <tbody><tr><td style="text-align:left;">.stop</td> <td style="text-align:left;">event.stopPropagation()</td></tr> <tr><td style="text-align:left;">.prevent</td> <td style="text-align:left;">event.preventDefault()</td></tr> <tr><td style="text-align:left;">.self</td> <td style="text-align:left;">if (event.target !== event.currentTarget) return</td></tr> <tr><td style="text-align:left;">Keys: .enter, .13</td> <td style="text-align:left;">if (event.keyCode !== 13) return (对于其他的键盘事件修饰符，将13换成其他的键盘code就行)</td></tr> <tr><td style="text-align:left;">Modifiers Keys: .ctrl, .alt, .shift, .meta</td> <td style="text-align:left;">if (!event.ctrlKey) return (将 ctrlKey 换成 altKey, shiftKey, 或者 metaKey, respectively)</td></tr></tbody></table> <p>例如</p> <div class="language-js extra-class"><pre class="language-js"><code>on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">keyup</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果触发事件的元素不是事件绑定的元素</span>
    <span class="token comment">// 则返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token operator">!==</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token comment">// 如果按下去的不是 enter 键或者</span>
    <span class="token comment">// 没有同时按下 shift 键</span>
    <span class="token comment">// 则返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>event<span class="token punctuation">.</span>shiftKey <span class="token operator">||</span> event<span class="token punctuation">.</span>keyCode <span class="token operator">!==</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token comment">// 阻止 事件冒泡</span>
    event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 阻止该元素默认的 keyup 事件</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="【进阶】createelement中slot属性的用法"><a href="#【进阶】createelement中slot属性的用法" class="header-anchor">#</a> 【进阶】CreateElement中<code>slot</code>属性的用法</h3> <p>这个Demo主要展示render中createElement的配置slot属性用法。</p> <blockquote><p>因为此处一直很疑惑什么情况下能够用到这个slot属性，所以就试了一下，仅供参考，具体使用场景需要根据业务逻辑来定</p></blockquote> <p><strong>组件</strong><code>wii-third</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-third'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiTestSlot<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'wii-test-slot'</span><span class="token punctuation">,</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>testslot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>testslot <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token comment">// 等价于</span>
          <span class="token comment">// &lt;div&gt;</span>
          <span class="token comment">//     第三个组件，测试在组件中定义slot, &lt;slot name=&quot;testslot&quot;&gt;&lt;/slot&gt;</span>
          <span class="token comment">// &lt;/div&gt;</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
          <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string">'第三个组件，测试在组件中定义slot, '</span><span class="token punctuation">,</span>
            <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>testslot
          <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    WiiTestSlotIn<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'wii-test-slot-in'</span><span class="token punctuation">,</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 等价于</span>
        <span class="token comment">// &lt;span&gt;我是组件中的slot内容&lt;/span&gt;</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
          <span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string">'我是组件中的slot内容'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 等价于</span>
    <span class="token comment">// &lt;div style=&quot;margin-top: 15px;&quot;&gt;</span>
    <span class="token comment">//     &lt;wii-test-slot&gt;</span>
    <span class="token comment">//       &lt;wii-test-slot-in slot=&quot;testslot&quot;&gt;&lt;/wii-test-slot-in&gt;</span>
    <span class="token comment">//     &lt;/wii-test-slot&gt;</span>
    <span class="token comment">// &lt;/div&gt;</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          marginTop<span class="token punctuation">:</span> <span class="token string">'15px'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">createElement</span><span class="token punctuation">(</span>
          <span class="token string">'wii-test-slot'</span><span class="token punctuation">,</span>
          <span class="token comment">//这么写不会被渲染到节点中去</span>
          <span class="token comment">// createElement(</span>
          <span class="token comment">//    'wii-test-slot-in',</span>
          <span class="token comment">//    {</span>
          <span class="token comment">//      slot: 'testslot'</span>
          <span class="token comment">//    }</span>
          <span class="token comment">//  ),</span>
          <span class="token punctuation">[</span>
            <span class="token comment">// createElement再放createElement需要放入数组里面，建议所有的组件的内容都放到数组里面，统一格式，防止出错</span>
            <span class="token function">createElement</span><span class="token punctuation">(</span>
              <span class="token string">'wii-test-slot-in'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                slot<span class="token punctuation">:</span> <span class="token string">'testslot'</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>【Tips】：如果createElement里面的第三个参数传递的是createElement生成的VNode对象，将不会被渲染到节点中，需要放到数组中才能生效，此处猜测是因为VNode对象不会被直接识别，因为文档要求是String或者Array。</p> <p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>third<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>third<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiThird <span class="token keyword">from</span> <span class="token string">'./components/third/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiThird
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="【深入】createelement中scopedslots的用法"><a href="#【深入】createelement中scopedslots的用法" class="header-anchor">#</a> 【深入】CreateElement中<code>scopedSlots</code>的用法</h3> <p>这个Demo主要展示scopedSlots的用法，包括定义和使用。scopedSlots的template用法和解释参考<a href="https://cn.vuejs.org/v2/guide/components-slots.html#%E8%A7%A3%E6%9E%84-slot-scope" target="_blank" rel="noopener noreferrer">vue-slot-scope<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p><strong>组件</strong><code>wii-forth</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-forth'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiScoped<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'wii-scoped'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> String
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 等价于 &lt;div&gt;&lt;slot :text=&quot;message&quot;&gt;&lt;/slot&gt;&lt;/div&gt;</span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
          <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$scopedSlots<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              text<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 等价于 </span>
    <span class="token comment">// &lt;div style=&quot;margin-top: 15px;&quot;&gt;</span>
    <span class="token comment">//   &lt;wii-scoped message=&quot;测试scopedSlots，我是传入的message&quot;&gt;</span>
    <span class="token comment">//     &lt;span slot-scope=&quot;props&quot;&gt;{{props.text}}&lt;/span&gt;</span>
    <span class="token comment">//   &lt;/wii-scoped&gt;</span>
    <span class="token comment">// &lt;/div&gt;</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          marginTop<span class="token punctuation">:</span> <span class="token string">'15px'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'wii-scoped'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'测试scopedSlots，我是传入的message'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 传递scopedSlots，通过props(自定义名称)取值</span>
          scopedSlots<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">default</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>引入方法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>forth<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>forth<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiForth <span class="token keyword">from</span> <span class="token string">'./components/forth/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiForth
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="【换口气儿】render中的jsx配置和用法"><a href="#【换口气儿】render中的jsx配置和用法" class="header-anchor">#</a> 【换口气儿】Render中的JSX配置和用法</h3> <p>写了这么多createElement，眼睛都花了，有的写起来也挺麻烦的。我们试试来换个口味，试试JSX的写法。</p> <p><em>工欲善其事，必先利其器。</em></p> <ul><li>首先我们安装vue写JSX必要的依赖：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>npm install babel-plugin-syntax-jsx babel-plugin-transform-vue-jsx babel-helper-vue-jsx-merge-props babel-preset-env --save-dev
</code></pre></div><ul><li><p>安装完成以后，在<code>.babelrc</code>文件配置<code>&quot;plugins&quot;: [&quot;transform-vue-jsx&quot;]</code>。</p></li> <li><p>将webpack配置文件中的js解析部分改成<code>test: /\.jsx?$/</code>表示对jsx的代码块进行解析。</p></li></ul> <p><strong>这个示例做了如下功能：</strong></p> <ol><li>通过props传入颜色，并在子组件配置</li> <li>点击改变颜色</li> <li>点击事件通过native获取</li></ol> <p><strong>父组件</strong><code>wii-jsx</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/jsx&quot;</span><span class="token operator">&gt;</span>
     <span class="token keyword">import</span> WiiJsxItem <span class="token keyword">from</span> <span class="token string">'./item.vue'</span>
     <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'wii-jsx'</span><span class="token punctuation">,</span>
        components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            WiiJsxItem
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                color<span class="token punctuation">:</span> <span class="token string">'red'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        props<span class="token punctuation">:</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;wii-jsx&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>wii<span class="token operator">-</span>jsx<span class="token operator">-</span>item color<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">}</span> nativeOnClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>我是wii<span class="token operator">-</span>jsx<span class="token operator">-</span>item组件的slot<span class="token punctuation">,</span> color通过变量传入<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>jsx<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token string">'red'</span> <span class="token operator">?</span> <span class="token string">'blue'</span> <span class="token punctuation">:</span> <span class="token string">'red'</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">点击了wii-jsx-item，通过native触发，改变了颜色为【</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">】</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>子组件</strong><code>wii-jsx-item</code></p> <p><em>该子组件在父组件中被引入，并用JSX的写法渲染。</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-jsx-item'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 等价于 &lt;div class=&quot;wii-jsx-item&quot;&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'wii-jsx-item'</span><span class="token punctuation">,</span>
        style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          color<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>jsx<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>jsx<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiJsx <span class="token keyword">from</span> <span class="token string">'./components/jsx/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiJsx
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JSX的主要转换还是依靠我们之前安装的<a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx" target="_blank" rel="noopener noreferrer">babel插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，而JSX的事件以及属性的用法见babel插件的<a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx#usage" target="_blank" rel="noopener noreferrer">使用说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这里面包含了vue里面事件和属性对应的用法说明。</p> <h3 id="【深入】函数式组件"><a href="#【深入】函数式组件" class="header-anchor">#</a> 【深入】函数式组件</h3> <p>下面来进行最后一个模块的介绍，函数式组件functional，这个东西的用法就见仁见智了，这里也没啥好的方案，只是给出了一些示例，各位大佬如果有一些具体的使用到的地方，阔以指点一下哇~thx~(<s>害羞.jpg</s>)。</p> <p><em>官方文档的定义是functional组件需要的一切都是通过上下文传递，包括：</em></p> <ul><li><em>props：提供所有 prop 的对象</em></li> <li><em>children: VNode 子节点的数组</em></li> <li><em>slots: 返回所有插槽的对象的函数</em></li> <li><em>data：传递给组件的数据对象，作为 createElement 的第二个参数传入组件</em></li> <li><em>parent：对父组件的引用</em></li> <li><em>listeners: (2.3.0+) 一个包含了所有在父组件上注册的事件侦听器的对象。这只是一个指向 data.on 的别名。</em></li> <li><em>injections: (2.3.0+) 如果使用了 inject 选项，则该对象包含了应当被注入的属性。</em></li></ul> <p>_在添加 _<code>functional: true</code><em>之后，组件的render函数会增加第二个参数context（第一个是createElement），数据和节点通过context传递。</em></p> <p><em><strong>Tips：</strong></em></p> <p><em>在 2.3.0 之前的版本中，如果一个函数式组件想要接受 props，则</em><code>props</code><em>选项是必须的。在 2.3.0 或以上的版本中，你可以省略</em><code>props</code><em>选项，所有组件上的属性都会被自动解析为 props。</em></p> <hr> <p><strong>我个人的理解是：</strong></p> <p>Functional相当于一个纯函数一样，内部不存储用于在界面上展示的数据，传入什么，展示什么，传入的是相同的数据，展示的必然是相同的。无实例，无状态，没有this上下文，均通过context来控制。</p> <p><strong>优点：</strong></p> <p>因为函数式组件只是一个函数，所以渲染开销低很多。</p> <p><strong>使用场景：</strong></p> <ol><li>仅仅作为接收参数用的组件（不做任何管理和监听状态）</li> <li>目前看大多数使用场景是用来包装动画组件，因为动画组件不需要状态管理这些</li> <li><em>程序化地在多个组件中选择一个（官方）</em></li> <li><em>在将 children, props, data 传递给子组件之前操作它们（官方）</em></li></ol> <p>接下来就通过两个组件来看看如何使用的吧，这里也仅仅只是示例而已，使用的场景仍在探索中，具体的使用场景还需要在开发过程中根据需求复杂的和性能要求来酌情选择~</p> <h4 id="函数式组件一-wii-functional用在动画的functional"><a href="#函数式组件一-wii-functional用在动画的functional" class="header-anchor">#</a> 函数式组件一 <code>wii-functional</code>用在动画的functional</h4> <p>这个Demo的作用是在输入框中输入字符，对数据列表进行筛选，筛选时加入显示和消失的动画。</p> <p><strong>组件主体</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Velocity <span class="token keyword">from</span> <span class="token string">'velocity-animate'</span> <span class="token comment">// 这是一个动画库</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-functional'</span><span class="token punctuation">,</span>
  functional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//表明是函数式组件</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// context是在functional: true时的参数</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        tag<span class="token punctuation">:</span> <span class="token string">'ul'</span><span class="token punctuation">,</span>
        css<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 进入前事件</span>
        <span class="token function-variable function">beforeEnter</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 进入事件</span>
        <span class="token function-variable function">enter</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> delay <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">150</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              opacity<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              height<span class="token punctuation">:</span> <span class="token string">'1.6em'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              complete<span class="token punctuation">:</span> done
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 离开事件</span>
        <span class="token function-variable function">leave</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> delay <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">150</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              opacity<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              height<span class="token punctuation">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              complete<span class="token punctuation">:</span> done
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'transition-group'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>上面这个组件相当于创建了一个<code>ul-li</code>标签组成的vue动画，通过functional方式包裹到组件外部，可以作为通用的动画。</p> <p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;query&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>functional<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in computedList&quot;</span>
          <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.msg&quot;</span>
          <span class="token punctuation">:</span>data<span class="token operator">-</span>index<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>functional<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiFunctional <span class="token keyword">from</span> <span class="token string">'./components/functional/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiFunctional
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 关键字</span>
      query<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token comment">// 数据列表</span>
      list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Bruce Lee'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Jackie Chan'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Chuck Norris'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Jet Li'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Kung Furry'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Chain Zhang'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Iris Zhao'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function-variable function">computedList</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token comment">// 过滤出符合条件的查询结果</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">computedList</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="函数式组件二-wii-choose-comp用在组件切换的functional"><a href="#函数式组件二-wii-choose-comp用在组件切换的functional" class="header-anchor">#</a> 函数式组件二 <code>wii-choose-comp</code>用在组件切换的functional</h4> <p>在这个示例中，通过props来切换加载不同的组件，并且在props传递给子组件之前操作它，组件内部定义了click.native事件来展示示例。如果对一批组件进行同样的操作，则可以用这个functional，类似于加工厂。</p> <p>当然如果组件需要不同的点击事件或者表现方式也可以在各个组件内部单独写逻辑或者监听~因为<code>wii-choose-comp</code>这个外壳本质不过就是个函数而已~</p> <p><strong>组件主体 <code>wii-choose-comp</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-choose-comp'</span><span class="token punctuation">,</span>
  functional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 2.3.0版本以上也可以不写props，会将组件属性默认绑定成props，为了统一标准还是写上</span>
    componentName<span class="token punctuation">:</span> String <span class="token comment">// 组件名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 给组件加上class</span>
    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token punctuation">[</span>context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName<span class="token punctuation">]</span>
    
    <span class="token comment">// 在props传给子组件之前操作它</span>
    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>props <span class="token operator">=</span> <span class="token punctuation">{</span>
      compName<span class="token punctuation">:</span> context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName
    <span class="token punctuation">}</span>

    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nativeOn <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'我是functional里面统一的点击事件'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName<span class="token punctuation">,</span> context<span class="token punctuation">.</span>data<span class="token punctuation">,</span> context<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>切换组件1 <code>wii-comp-one</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    compName<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'我是第一个comp, 我有点击效果, '</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>compName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>切换组件2 <code>wii-comp-two</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-comp-two'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    compName<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'我是第二个comp, 点我试试呗, '</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>compName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeComponent&quot;</span><span class="token operator">&gt;</span>点击切换组件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>choose<span class="token operator">-</span>comp <span class="token punctuation">:</span>component<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">&quot;componentName&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>我是<span class="token punctuation">{</span><span class="token punctuation">{</span>componentName<span class="token punctuation">}</span><span class="token punctuation">}</span>的slot<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>choose<span class="token operator">-</span>comp<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiChooseComp <span class="token keyword">from</span> <span class="token string">'./components/functional/chooseComp.vue'</span>
<span class="token keyword">import</span> WiiCompOne <span class="token keyword">from</span> <span class="token string">'./components/functional/comp1.vue'</span>
<span class="token keyword">import</span> WiiCompTwo <span class="token keyword">from</span> <span class="token string">'./components/functional/comp2.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiChooseComp<span class="token punctuation">,</span>
    WiiCompOne<span class="token punctuation">,</span>
    WiiCompTwo
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      componentName<span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentName <span class="token operator">==</span> <span class="token string">'wii-comp-one'</span> <span class="token operator">?</span> <span class="token string">'wii-comp-two'</span> <span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>**【Tips】**需要将待切换的组件全部引入到外层。（<em>不造有没有更好的办法？</em>）</p> <p>下面来进行最后一个模块的介绍，函数式组件functional，这个东西的用法就见仁见智了，这里也没啥好的方案，只是给出了一些示例，各位大佬如果有一些具体的使用到的地方，阔以指点一下哇~thx~(<s>害羞.jpg</s>)。</p> <p><em>官方文档的定义是functional组件需要的一切都是通过上下文传递，包括：</em></p> <ul><li><em>props：提供所有 prop 的对象</em></li> <li><em>children: VNode 子节点的数组</em></li> <li><em>slots: 返回所有插槽的对象的函数</em></li> <li><em>data：传递给组件的数据对象，作为 createElement 的第二个参数传入组件</em></li> <li><em>parent：对父组件的引用</em></li> <li><em>listeners: (2.3.0+) 一个包含了所有在父组件上注册的事件侦听器的对象。这只是一个指向 data.on 的别名。</em></li> <li><em>injections: (2.3.0+) 如果使用了 inject 选项，则该对象包含了应当被注入的属性。</em></li></ul> <p>_在添加 _<code>functional: true</code><em>之后，组件的render函数会增加第二个参数context（第一个是createElement），数据和节点通过context传递。</em></p> <p><em><strong>Tips：</strong></em></p> <p><em>在 2.3.0 之前的版本中，如果一个函数式组件想要接受 props，则</em><code>props</code><em>选项是必须的。在 2.3.0 或以上的版本中，你可以省略</em><code>props</code><em>选项，所有组件上的属性都会被自动解析为 props。</em></p> <hr> <p><strong>我个人的理解是：</strong></p> <p>Functional相当于一个纯函数一样，内部不存储用于在界面上展示的数据，传入什么，展示什么，传入的是相同的数据，展示的必然是相同的。无实例，无状态，没有this上下文，均通过context来控制。</p> <p><strong>优点：</strong></p> <p>因为函数式组件只是一个函数，所以渲染开销低很多。</p> <p><strong>使用场景：</strong></p> <ol><li>仅仅作为接收参数用的组件（不做任何管理和监听状态）</li> <li>目前看大多数使用场景是用来包装动画组件，因为动画组件不需要状态管理这些</li> <li><em>程序化地在多个组件中选择一个（官方）</em></li> <li><em>在将 children, props, data 传递给子组件之前操作它们（官方）</em></li></ol> <p>接下来就通过两个组件来看看如何使用的吧，这里也仅仅只是示例而已，使用的场景仍在探索中，具体的使用场景还需要在开发过程中根据需求复杂的和性能要求来酌情选择~</p> <h4 id="函数式组件一-wii-functional用在动画的functional-2"><a href="#函数式组件一-wii-functional用在动画的functional-2" class="header-anchor">#</a> 函数式组件一 <code>wii-functional</code>用在动画的functional</h4> <p>这个Demo的作用是在输入框中输入字符，对数据列表进行筛选，筛选时加入显示和消失的动画。</p> <p><strong>组件主体</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Velocity <span class="token keyword">from</span> <span class="token string">'velocity-animate'</span> <span class="token comment">// 这是一个动画库</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-functional'</span><span class="token punctuation">,</span>
  functional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//表明是函数式组件</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// context是在functional: true时的参数</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        tag<span class="token punctuation">:</span> <span class="token string">'ul'</span><span class="token punctuation">,</span>
        css<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 进入前事件</span>
        <span class="token function-variable function">beforeEnter</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 进入事件</span>
        <span class="token function-variable function">enter</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> delay <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">150</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              opacity<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              height<span class="token punctuation">:</span> <span class="token string">'1.6em'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              complete<span class="token punctuation">:</span> done
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 离开事件</span>
        <span class="token function-variable function">leave</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> delay <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">150</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              opacity<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              height<span class="token punctuation">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              complete<span class="token punctuation">:</span> done
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'transition-group'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>上面这个组件相当于创建了一个<code>ul-li</code>标签组成的vue动画，通过functional方式包裹到组件外部，可以作为通用的动画。</p> <p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;query&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>functional<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in computedList&quot;</span>
          <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.msg&quot;</span>
          <span class="token punctuation">:</span>data<span class="token operator">-</span>index<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>functional<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiFunctional <span class="token keyword">from</span> <span class="token string">'./components/functional/index.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiFunctional
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 关键字</span>
      query<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token comment">// 数据列表</span>
      list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Bruce Lee'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Jackie Chan'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Chuck Norris'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Jet Li'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Kung Furry'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Chain Zhang'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span> <span class="token string">'Iris Zhao'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function-variable function">computedList</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token comment">// 过滤出符合条件的查询结果</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">computedList</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="函数式组件二-wii-choose-comp用在组件切换的functional-2"><a href="#函数式组件二-wii-choose-comp用在组件切换的functional-2" class="header-anchor">#</a> 函数式组件二 <code>wii-choose-comp</code>用在组件切换的functional</h4> <p>在这个示例中，通过props来切换加载不同的组件，并且在props传递给子组件之前操作它，组件内部定义了click.native事件来展示示例。如果对一批组件进行同样的操作，则可以用这个functional，类似于加工厂。</p> <p>当然如果组件需要不同的点击事件或者表现方式也可以在各个组件内部单独写逻辑或者监听~因为<code>wii-choose-comp</code>这个外壳本质不过就是个函数而已~</p> <p><strong>组件主体 <code>wii-choose-comp</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-choose-comp'</span><span class="token punctuation">,</span>
  functional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 2.3.0版本以上也可以不写props，会将组件属性默认绑定成props，为了统一标准还是写上</span>
    componentName<span class="token punctuation">:</span> String <span class="token comment">// 组件名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 给组件加上class</span>
    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token punctuation">[</span>context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName<span class="token punctuation">]</span>
    
    <span class="token comment">// 在props传给子组件之前操作它</span>
    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>props <span class="token operator">=</span> <span class="token punctuation">{</span>
      compName<span class="token punctuation">:</span> context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName
    <span class="token punctuation">}</span>

    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nativeOn <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'我是functional里面统一的点击事件'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>props<span class="token punctuation">.</span>componentName<span class="token punctuation">,</span> context<span class="token punctuation">.</span>data<span class="token punctuation">,</span> context<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>切换组件1 <code>wii-comp-one</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    compName<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'我是第一个comp, 我有点击效果, '</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>compName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>切换组件2 <code>wii-comp-two</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'wii-comp-two'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    compName<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'我是第二个comp, 点我试试呗, '</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>compName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token operator">...</span>this<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>引入方式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeComponent&quot;</span><span class="token operator">&gt;</span>点击切换组件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>wii<span class="token operator">-</span>choose<span class="token operator">-</span>comp <span class="token punctuation">:</span>component<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">&quot;componentName&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>我是<span class="token punctuation">{</span><span class="token punctuation">{</span>componentName<span class="token punctuation">}</span><span class="token punctuation">}</span>的slot<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>wii<span class="token operator">-</span>choose<span class="token operator">-</span>comp<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> WiiChooseComp <span class="token keyword">from</span> <span class="token string">'./components/functional/chooseComp.vue'</span>
<span class="token keyword">import</span> WiiCompOne <span class="token keyword">from</span> <span class="token string">'./components/functional/comp1.vue'</span>
<span class="token keyword">import</span> WiiCompTwo <span class="token keyword">from</span> <span class="token string">'./components/functional/comp2.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    WiiChooseComp<span class="token punctuation">,</span>
    WiiCompOne<span class="token punctuation">,</span>
    WiiCompTwo
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      componentName<span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentName <span class="token operator">==</span> <span class="token string">'wii-comp-one'</span> <span class="token operator">?</span> <span class="token string">'wii-comp-two'</span> <span class="token punctuation">:</span> <span class="token string">'wii-comp-one'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>**【Tips】**需要将待切换的组件全部引入到外层。（<em>不造有没有更好的办法？</em>）</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>以上就是最近对Vue Render的一个探索，因为对于公共组件库开发来说，需要考虑的问题有很多，所以灵活性要求也更高，如果用Vue Render这种更接近编译的方式来编写组件库，可能会让逻辑更清晰，虽然不停的创建元素的写法是挺恶心的哈哈哈哈~~</p> <p>接下来就是用来进行一下实战了，在实战的时候有什么坑就到时候再慢慢填咯~~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/24/2019, 12:27:01 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e797f4dd.js" defer></script><script src="/assets/js/2.f20e9021.js" defer></script><script src="/assets/js/7.dddc0873.js" defer></script>
  </body>
</html>
